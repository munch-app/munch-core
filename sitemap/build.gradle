dependencies {
    compile project(':utils')
    compile group: 'dev.fuxing', name: 'transport-core', version: transportVersion
    compile group: 'com.google.inject', name: 'guice', version: guiceVersion

    compile group: 'munch.restful', name: 'restful-core', version: restfulVersion

    compile group: 'com.github.dfabulich', name: 'sitemapgen4j', version: '1.1.1'

    compile group: 'catalyst', name: 'catalyst-utils', version: catalystVersion
    compile group: 'com.munch', name: 'munch-block-aws', version: '1.0.11'

    compile project(':api:api-core')
    compile project(':api:api-search')
}

ext.dockerVersion = 'latest'
apply from: (project.rootDir.toString() + '/docker.gradle')
mainClassName = 'app.munch.sitemap.SitemapModule'

task publishSitemap {
    dependsOn 'buildImage'

    doLast {
        exec { commandLine "docker", "push", dockerTag }
    }
}
